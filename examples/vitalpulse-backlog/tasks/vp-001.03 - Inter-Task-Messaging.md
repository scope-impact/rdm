---
id: vp-001.03
title: "Inter-Task Messaging (Queues and Semaphores)"
status: In Progress
assignee: []
created_date: '2026-01-18'
updated_date: '2026-01-18'
labels:
  - vp-001.03
  - firmware
  - rtos
  - ipc
dependencies:
  - vp-001.01
parent_task_id: vp-001
ordinal: 3000
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
As a **Firmware engineer**, I want to **implement inter-task communication primitives** so that I can **safely pass data between sensor tasks and alarm engine**.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria

<!-- AC:BEGIN -->
- [ ] #1 Message queues created for sensor-to-alarm data flow
- [ ] #2 Binary semaphores for hardware resource protection
- [ ] #3 Mutex with priority inheritance for shared data structures
- [ ] #4 Queue depth sized for worst-case latency (alarm response < 100ms)
- [ ] #5 Queue overflow handling logs error and triggers watchdog
- [ ] #6 ISR-safe queue send (xQueueSendFromISR) for DMA completion
<!-- AC:END -->

## Implementation Notes

<!-- SECTION:NOTES:BEGIN -->
- **Queues:**
  - SpO2DataQueue: 10 elements x 32 bytes
  - ECGDataQueue: 50 elements x 64 bytes
  - AlarmEventQueue: 20 elements x 16 bytes
- **Why:** Decouples acquisition timing from processing timing
- **Dependencies:** vp-001.01 (FreeRTOS kernel)
<!-- SECTION:NOTES:END -->
